p8105_hw2_yy3563.Rmd
================
Yifei Yu
2024-10-01

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
library(readxl)
library(haven)
```

## Problem 1

``` r
nyc_transit = 
  read_csv("Homework2_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
           na = c("NA", "", ".")) |> 
  janitor::clean_names() |> 
  select(line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada) |> 
  mutate(entry = if_else(entry == "YES", 1, 0))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

The dataset `nyc_transit` contains `line`, `station_name`,
`station_latitude`, `entry`, `vending`, `entrance_type`, `ada`, and all
the routes served.

One variable named `entry`, originally contained the values “YES” and
“NO” to indicate whether an entrance allows entry, which has been
changed into numeric values where “YES” is replaced with 1 and “NO” is
replaced with 0.

The cleaning steps so far include renaming the variables name, making
them into lowercase with underscores instead of space and only retain
those useful variables for analysis and exclude other variables.

The dimension of the resulting dataset includes 1868 rows and 32
columns.

The data are tidy because columns are variables and observations are on
the row.

### Answering three questions

``` r
nrow(distinct(nyc_transit, station_name, line))
```

    ## [1] 465

There are 465 distinct stations.

``` r
ada_compliant = nyc_transit |> 
  filter(ada == "TRUE") |> 
  distinct(station_name, line) |> 
  nrow()
```

84 stations are ADA compliant.

``` r
proportion = nyc_transit |> 
  filter(entry == 1) |> 
  summarise(proportion = mean(vending == "NO"))
```

The proportion of station entrances / exits without vending allow
entrance is 0.0394.

### Reformat data so that route number and route name are distinct variables.

``` r
nyc_transit = nyc_transit |> 
  mutate(across(starts_with("route"), as.character))

nyc_transit_new = nyc_transit |> 
  pivot_longer(cols = starts_with("route"),
               names_to = "route_number",
               values_to = "route_name")
```

``` r
station_serving_A = nyc_transit_new |> 
  filter(route_name == "A") |> 
  distinct(station_name, line) |> 
  nrow()
```

There are 60 distinct stations serve the A train.

``` r
ada_station_serving_A = nyc_transit_new |> 
  filter(route_name == "A", ada == "TRUE") |> 
  distinct(station_name, line) |> 
  nrow()
```

Of the stations that serve the A train, 17 of them are ADA compliant.

## Problem 2

``` r
mr_trash_wheel = 
  read_excel("Homework2_data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel", range = "A2:N653") |> 
  janitor::clean_names() |> 
  mutate(sports_balls = as.integer(round(sports_balls)))
```

``` r
professor_trash_wheel = 
  read_excel("Homework2_data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel", range = "A2:M120") |> 
  janitor::clean_names()
```

``` r
gwynnda_trash_wheel = 
  read_excel("Homework2_data/202409 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynnda Trash Wheel", range = "A2:L265") |> 
  janitor::clean_names()
```
